!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.FilteredList=e()}}(function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){t.exports=function(e,t,n){var i;return function(){function r(){n||e.apply(a,s),i=null}var a=this,s=arguments;i?clearTimeout(i):n&&e.apply(a,s),i=setTimeout(r,t||100)}}},{}],2:[function(e,t){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],3:[function(e,t){(function(){var n,i;i=e("../vendor/stringscore"),n=function(e,t,n){var r,a,s,o,l,c;for(s=e.length-1;"/"===e[s];)s--;for(c=0,o=s,r=null;s>=0;)"/"===e[s]?(c++,null==r&&(r=e.substring(s+1,o+1))):0===s&&(o<e.length-1?null==r&&(r=e.substring(0,o+1)):null==r&&(r=e)),s--;return r===e?n*=2:r&&(n+=i(r,t)),l=c+1,a=Math.max(1,10-l),n*=.01*a},t.exports=function(e,t,r){var a,s,o,l,c,u,f,d,p,_,m;if(m=null!=r?r:{},s=m.key,o=m.maxResults,t){for(l=-1===t.indexOf("/"),f=[],p=0,_=e.length;_>p;p++)a=e[p],d=null!=s?a[s]:a,d&&(c=i(d,t),l&&(c=n(d,t,c)),c>0&&f.push({candidate:a,score:c}));f.sort(function(e,t){return t.score-e.score}),e=function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)u=f[e],n.push(u.candidate);return n}()}return null!=o&&(e=e.slice(0,o)),e}}).call(this)},{"../vendor/stringscore":5}],4:[function(e,t){(function(){var n;n=e("../vendor/stringscore"),t.exports={filter:e("./filter"),score:function(e,t){return e&&t?n(e,t):0}}}).call(this)},{"../vendor/stringscore":5,"./filter":3}],5:[function(e,t){t.exports=function(e,t){if(e==t)return 1;for(var n,i,r,a,s,o,l,c,u,f=0,d=t.length,p=e.length,_=0;d>_;++_){if(o=t.charAt(_),l=e.indexOf(o.toLowerCase()),c=e.indexOf(o.toUpperCase()),u=Math.min(l,c),s=u>-1?u:Math.max(l,c),-1===s)return 0;a=.1,e[s]===o&&(a+=.1),0===s?a+=.6:" "===e.charAt(s-1)&&(a+=.8),e=e.substring(s+1,p),f+=a}return i=f/d,r=(i*(d/p)+i)/2,n&&1>r+.15&&(r+=.15),r}},{}],6:[function(e,t,n){function i(e,t){t=t||{};var n=r(e);return n(t)}function r(e){for(var t,n=[],i=s(e),r=0;r<i.length;++r)if(t=i[r],r%2==0)n.push('"'+t.replace(/"/g,'\\"')+'"');else switch(t[0]){case"/":t=t.slice(1),n.push(") + ");break;case"^":t=t.slice(1),a(t),n.push(' + section(obj, "'+t+'", true, ');break;case"#":t=t.slice(1),a(t),n.push(' + section(obj, "'+t+'", false, ');break;case"!":t=t.slice(1),a(t),n.push(" + obj."+t+" + ");break;default:a(t),n.push(" + escape(obj."+t+") + ")}return n="\n"+o(c.toString())+";\n\n"+o(l.toString())+";\n\n  return "+n.join("").replace(/\n/g,"\\n"),new Function("obj",n)}function a(e){if(!e.match(/^[\w.]+$/))throw new Error('invalid property "'+e+'"')}function s(e){return e.split(/\{\{|\}\}/)}function o(e){return e.replace(/^/gm,"  ")}function l(e,t,n,i){var r=e[t];return"function"==typeof r?r.call(e,i):(n&&(r=!r),r?i:"")}function c(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}n=t.exports=i,n.compile=r},{}],7:[function(e,t,n){var i="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";n.generate=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)});return t},n.match=function(e){var t=new RegExp(i,"g"),n=("string"==typeof e?e:"").match(t);return Array.isArray(n)?n:[]},n.isValid=function(e){var t=new RegExp(i);return t.test(e)}},{}],8:[function(e,t,n){var i=e("./ises/type"),r={a:{},an:{},not:{a:{},an:{}}},a={arguments:["arguments",i("arguments")],array:["array",i("array")],"boolean":["boolean",i("boolean")],date:["date",i("date")],"function":["function","func","fn",i("function")],"null":["null",i("null")],number:["number","integer","int",i("number")],object:["object",i("object")],regexp:["regexp",i("regexp")],string:["string",i("string")],undefined:["undefined",i("undefined")],empty:["empty",e("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",e("./ises/nullorundefined")],guid:["guid",e("./ises/guid")]};Object.keys(a).forEach(function(e){var t=a[e].slice(0,a[e].length-1),n=a[e][a[e].length-1];t.forEach(function(e){r[e]=r.a[e]=r.an[e]=n,r.not[e]=r.not.a[e]=r.not.an[e]=function(){return n.apply(this,arguments)?!1:!0}})}),n=t.exports=r,n.type=i},{"./ises/empty":9,"./ises/guid":10,"./ises/nullorundefined":11,"./ises/type":12}],9:[function(e,t){var n=e("../type");t.exports=function(e){var t=!1;return"null"===n(e)||"undefined"===n(e)?t=!0:"object"===n(e)?t=0===Object.keys(e).length:"boolean"===n(e)?t=e===!1:"number"===n(e)?t=0===e||-1===e:("array"===n(e)||"string"===n(e))&&(t=0===e.length),t}},{"../type":13}],10:[function(e,t){var n=e("sc-guid");t.exports=function(e){return n.isValid(e)}},{"sc-guid":7}],11:[function(e,t){t.exports=function(e){return null===e||void 0===e||void 0===e}},{}],12:[function(e,t){var n=e("../type");t.exports=function(e){return function(t){return n(t)===e}}},{"../type":13}],13:[function(e,t){var n=Object.prototype.toString;t.exports=function(e){switch(n.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],14:[function(e,t,n){function i(e){return JSON.stringify(e)}function r(e){return a(i(e))}var a=e("md5-component");n=t.exports=r,n.stringify=i,n.md5=a},{"md5-component":15}],15:[function(e,t){function n(e){function t(e,t,n){return e&t|~e&n}function n(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function r(e,t,n){return t^(e|~n)}function a(e){return[255&e,e>>>8&255,e>>>16&255,e>>>24&255]}function s(e,t,n,i,r,a,s,o){e[0]+=o(t[0],n[0],i[0])+y[r]+s,e[0]=e[0]<<a|e[0]>>>32-a,e[0]+=t[0]}var o,l,c,u,f,d,p,_,m,v,h,g,b,y,x;for(o=e.length,e.push(128),f=56-e.length&63,l=0;f>l;l++)e.push(0);for(a(8*o).forEach(function(t){e.push(t)}),[0,0,0,0].forEach(function(t){e.push(t)}),d=[1732584193],p=[4023233417],_=[2562383102],m=[271733878],l=0;l<e.length;l+=64){for(y=[],c=0;64>c;c+=4)u=l+c,y.push(e[u]|e[u+1]<<8|e[u+2]<<16|e[u+3]<<24);v=d[0],h=p[0],g=_[0],b=m[0],s(d,p,_,m,0,7,3614090360,t),s(m,d,p,_,1,12,3905402710,t),s(_,m,d,p,2,17,606105819,t),s(p,_,m,d,3,22,3250441966,t),s(d,p,_,m,4,7,4118548399,t),s(m,d,p,_,5,12,1200080426,t),s(_,m,d,p,6,17,2821735955,t),s(p,_,m,d,7,22,4249261313,t),s(d,p,_,m,8,7,1770035416,t),s(m,d,p,_,9,12,2336552879,t),s(_,m,d,p,10,17,4294925233,t),s(p,_,m,d,11,22,2304563134,t),s(d,p,_,m,12,7,1804603682,t),s(m,d,p,_,13,12,4254626195,t),s(_,m,d,p,14,17,2792965006,t),s(p,_,m,d,15,22,1236535329,t),s(d,p,_,m,1,5,4129170786,n),s(m,d,p,_,6,9,3225465664,n),s(_,m,d,p,11,14,643717713,n),s(p,_,m,d,0,20,3921069994,n),s(d,p,_,m,5,5,3593408605,n),s(m,d,p,_,10,9,38016083,n),s(_,m,d,p,15,14,3634488961,n),s(p,_,m,d,4,20,3889429448,n),s(d,p,_,m,9,5,568446438,n),s(m,d,p,_,14,9,3275163606,n),s(_,m,d,p,3,14,4107603335,n),s(p,_,m,d,8,20,1163531501,n),s(d,p,_,m,13,5,2850285829,n),s(m,d,p,_,2,9,4243563512,n),s(_,m,d,p,7,14,1735328473,n),s(p,_,m,d,12,20,2368359562,n),s(d,p,_,m,5,4,4294588738,i),s(m,d,p,_,8,11,2272392833,i),s(_,m,d,p,11,16,1839030562,i),s(p,_,m,d,14,23,4259657740,i),s(d,p,_,m,1,4,2763975236,i),s(m,d,p,_,4,11,1272893353,i),s(_,m,d,p,7,16,4139469664,i),s(p,_,m,d,10,23,3200236656,i),s(d,p,_,m,13,4,681279174,i),s(m,d,p,_,0,11,3936430074,i),s(_,m,d,p,3,16,3572445317,i),s(p,_,m,d,6,23,76029189,i),s(d,p,_,m,9,4,3654602809,i),s(m,d,p,_,12,11,3873151461,i),s(_,m,d,p,15,16,530742520,i),s(p,_,m,d,2,23,3299628645,i),s(d,p,_,m,0,6,4096336452,r),s(m,d,p,_,7,10,1126891415,r),s(_,m,d,p,14,15,2878612391,r),s(p,_,m,d,5,21,4237533241,r),s(d,p,_,m,12,6,1700485571,r),s(m,d,p,_,3,10,2399980690,r),s(_,m,d,p,10,15,4293915773,r),s(p,_,m,d,1,21,2240044497,r),s(d,p,_,m,8,6,1873313359,r),s(m,d,p,_,15,10,4264355552,r),s(_,m,d,p,6,15,2734768916,r),s(p,_,m,d,13,21,1309151649,r),s(d,p,_,m,4,6,4149444226,r),s(m,d,p,_,11,10,3174756917,r),s(_,m,d,p,2,15,718787259,r),s(p,_,m,d,9,21,3951481745,r),d[0]+=v,p[0]+=h,_[0]+=g,m[0]+=b}return x=[],a(d[0]).forEach(function(e){x.push(e)}),a(p[0]).forEach(function(e){x.push(e)}),a(_[0]).forEach(function(e){x.push(e)}),a(m[0]).forEach(function(e){x.push(e)}),x}function i(e){var t,i,r,e,a=[];for(t=0;t<e.length;t++)a.push(e.charCodeAt(t));return i=n(a),r="",i.forEach(function(t){for(e=t.toString(16);e.length<2;)e="0"+e;r+=e}),r}t.exports=i},{}],16:[function(e,t){var n=e("type-component"),i=function(){var e=Array.prototype.slice.call(arguments),t="boolean"===n(e[0])?e.shift():!1,r=e,a={};return r.forEach(function(e){"object"===n(e)&&Object.keys(e).forEach(function(r){Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t&&"object"===n(e[r])?i(t,{},a[r],e[r]):e[r])})}),a};t.exports=i},{"type-component":17}],17:[function(e,t){var n=Object.prototype.toString;t.exports=function(e){switch(n.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],18:[function(e,t){var n=function(e){var t={},n=Array.isArray(e)?e:[],i=function(e){var i=Array.prototype.slice.call(arguments,1);return t[e]?t[e].apply(n,i):n["__"+e].apply(n,i)};return Object.defineProperties(n,{on:{value:function(e,n){t[e]=n}}}),Object.defineProperty(n,"pop",{value:function(){return i("pop",n[n.length-1])}}),Object.defineProperty(n,"__pop",{value:function(){return Array.prototype.pop.apply(n,arguments)}}),Object.defineProperty(n,"shift",{value:function(){return i("shift",n[0])}}),Object.defineProperty(n,"__shift",{value:function(){return Array.prototype.shift.apply(n,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(e){var t={};t[e]={value:i.bind(null,e)},t["__"+e]={value:function(){return Array.prototype[e].apply(n,arguments)}},Object.defineProperties(n,t)}),n};t.exports=n},{}],19:[function(e,t){t.exports={name:"scfilteredlist",className:"sc-filtered-list",defaults:{buttonLabel:"Choose one",fuzzy:!1,itemLabelKey:"name",listTitle:"Select an item",maxNumItems:10,maxNumItemsVisible:7,width:300,sort:"desc",sortControlVisible:!0},templates:{listWrapper:"<div class='{{config.className}}-container'>{{!config.templates.listInput}}{{!config.templates.listHeader}}{{!config.templates.listItemWrapper}}</div>",listInput:"<div class='{{config.className}}-input-container'><input type='text' class='{{config.className}}-input form-control'></div>",listHeader:"<header class='{{config.className}}-header panel-heading'>{{!config.defaults.listTitle}}{{!config.templates.listSortToggle}}</header>",listItemWrapper:"<div class='{{config.className}}-items list-group'></div>",listItem:"<a href class='{{config.className}}-item list-group-item' data-cid='{{cid}}'>{{!key}}</a>",listSortToggle:"<button type='button' class='{{config.className}}-sort-toggle btn btn-default btn-xs' title='sort'></button>"}}},{}],20:[function(e,t,n){var i=e("./config.json"),r=e("emitter-component"),a=e("sc-guid"),s=e("./helpers"),o=e("sc-is"),l=e("./list"),c=e("sg-observable-array"),u=function(e,t){var n,r,o=this,u=a.generate();if(o.$el=$(e),0===o.$el.length)throw new Error("An invalid DOM element was given");n=$.extend({},i.defaults,o.$el.data(i.className+"-options"),t),r=$.extend({},i,{defaults:n}),o.$el.wrap("<span class='"+r.className+"' data-sc-filtered-list-cid='"+u+"'>"),o.$wrapper=o.$el.parent(),Object.defineProperties(o,{__cid:{value:u},__config:{value:r,writable:!0},__destroyed:{value:!1,writable:!0},__fetching:{value:!1,writable:!0},__items:{value:{},writable:!0},__label:{value:null,writable:!0},__lastFetchedValue:{value:"",writable:!0},__original:{value:{},writable:!0},__sort:{value:"",writable:!0},__value:{value:null,writable:!0},activeItem:{get:s.activeItemGet.bind(o),set:s.activeItemSet.bind(o)},items:{value:c([]),writable:!0},label:{get:s.labelGet.bind(o),set:s.labelSet.bind(o)},list:{writable:!0},listVisible:{get:s.listVisibleGet.bind(o),set:s.listVisibleSet.bind(o)},results:{value:[],writable:!0},sort:{get:s.sortGet.bind(o),set:s.sortSet.bind(o)},value:{get:s.valueGet.bind(o),set:s.valueSet.bind(o)}}),o.list=new l(o),o.__original.buttonText=o.$el.text();var f={};f[o.__config.defaults.itemLabelKey]=o.__config.defaults.buttonLabel,o.value=f,o.$el.addClass(o.__config.className+"-button").data(o.__config.name,o).trigger(o.__config.name+"-ready"),o.__config.defaults.sortControlVisible!==!0&&o.$wrapper.addClass(o.__config.className+"-sort-hidden"),["push","shift"].forEach(function(e){o.items.on(e,s["item"+e].bind(o))}),$(window).on("click."+o.__config.name,s.bodyClick.bind(o)),o.fetch(),o.emit(o.__config.name+"-ready")};u.prototype.data=function(e){var t=this;if(!t.__destroyed){var n=o.array(e)?e:[];n.forEach(function(e){o.an.object(e)&&t.items.push(e)})}},u.prototype.destroy=function(){var e=this;e.__destroyed||(e.__destroyed=!0,e.list.destroy(),$(window).off("."+e.__config.name),e.$el.text(e.__original.buttonText).unwrap().data(e.__config.name,null).removeClass(e.__config.className+"-button"),e.emit("destroy"))},u.prototype.fetch=function(){var e=this;if(!e.__destroyed){var t=e.list.$input.val();e.__lastFetchedValue=t,e.emit("fetch",e.__lastFetchedValue)}},r(u.prototype),n=t.exports=u,n.defaults=i.defaults,n.templates=i.templates,$(function(){$("button[data-"+i.className+"]").each(function(e,t){new u(t)})})},{"./config.json":19,"./helpers":21,"./list":23,"emitter-component":2,"sc-guid":7,"sc-is":8,"sg-observable-array":18}],21:[function(e,t,n){var i=e("sc-is"),r=e("./item-value"),a=["","desc","asc"],s=e("sc-md5");n.activeItemGet=function(){var e=this;if(!e.__destroyed)return e.list.getActiveItem()},n.activeItemSet=function(e){var t=this;t.__destroyed||(t.value=e,t.emit("change",e))},n.activeItemIndexGet=function(){var e=this;if(!e.filter.__destroyed)return e.__activeItemIndex},n.activeItemIndexSet=function(e){var t=this;if(!t.filter.__destroyed){var n=i.a.number(e)?e:0,r=t.filter.__config.className+"-item-active",a=t.$list.children(),s=$(a[0]),o=t.$list.find("."+r),l=$(a[n]),c=1===l.length?l:1===o.length?o:s;o.removeClass(r),c.addClass(r),t.__activeItemIndex=a.index(c),t.__visible&&t.filter.emit("itemFocus")}},n.bodyClick=function(e){var t=this;if(!t.__destroyed){var n="."+t.__config.className+"-button",r="."+t.__config.className+"-container",a=$(i.object(e)&&e.target?e.target:null),s=a.closest("[data-"+t.__config.className+"-cid="+t.__cid+"]"),o=s.length>0&&(a.is(n)||a.closest(n).length)?!0:!1,l=s.length>0&&(a.is(r)||a.closest(r).length)?!0:!1;o&&!t.listVisible?t.listVisible=!0:t.listVisible&&!l&&(t.listVisible=!1)}},n.filterChanged=function(e){var t=this;if(!t.filter.__destroyed){var n=i.object(e)&&i.number(e.keyCode)?e.keyCode:-1,r=t.$input.val();switch(n){case 27:t.close();break;case 13:t.close(),t.filter.activeItem=t.getActiveItem();break;case 38:t.activeItemIndex--;break;case 40:t.activeItemIndex++;break;default:n>=0&&(t.filter.emit("filterChanged",r),t.filter.fetch())}}},n.indexOf=function(e,t){var n=i.array(e)?e:[],r=-1;return n.forEach(function(e,n){-1===r&&t===e&&(r=n)}),r},n.windowKeyUp=function(e){var t=this;if(!t.filter.__destroyed){var n=i.object(e)&&i.number(e.keyCode)?e.keyCode:-1;switch(n){case 27:t.close()}}},n.itemClick=function(e){var t=this;if(!t.filter.__destroyed){e.preventDefault();var n=$(e.currentTarget);t.activeItemIndex=n.parent().children().index(n),t.filter.activeItem=t.getActiveItem(),t.close()}},n.itempush=function(e){var t=this;if(!t.__destroyed&&!e.hasOwnProperty("__cid")){var n=s(e);t.__items[n]||(Object.defineProperty(e,"__cid",{value:n}),t.__items[n]=e,t.items.__push(e),t.list.redraw())}},n.itemshift=function(e){var t=this;if(!t.__destroyed){var n=s(e);delete t.__items[n],t.items.__shift()}},n.labelGet=function(){var e=this;if(!e.__destroyed)return e.__label},n.labelSet=function(e){var t=this;if(!t.__destroyed)return t.__label=e||t.__config.defaults.defaultButtonLabel,t.$el.text(t.__label),t.__label},n.listVisibleGet=function(){var e=this;if(!e.__destroyed)return e.list.__visible},n.listVisibleSet=function(e){var t=this;if(!t.__destroyed){var n=e===!0||!1;return n?t.list.open():t.list.close()}},n.putFocussedItemInView=function(){var e=this;e.filter.__destroyed||setTimeout(function(){var t=e.$list.height(),n=e.$list.find("."+e.filter.__config.className+"-item-active");if(0!==n.length){var i=n.outerHeight(),r=n.position().top,a=r+i;(0>r||a>t)&&n[0].scrollIntoView(0>r)}},10)},n.sortGet=function(){var e=this;if(!e.__destroyed)return e.__sort},n.sortSet=function(e){var t,n=this;if(!n.__destroyed){var i=n.__config.className+"-sort-",r=a.join(" "+i).trim();return a.forEach(function(n){t||n!==e||(t=e)}),n.__sort=t||a[0],n.list.redraw(),n.$wrapper.removeClass(r).addClass(n.__sort?i+n.__sort:""),n.emit("sort"),n.__sort}},n.sortToggleClicked=function(){var e=this;if(!e.filter.__destroyed){var t=e.filter,i=t.sort,r=n.indexOf(a,i),s=r+1,o=void 0===a[s]?a[0]:a[s];t.sort=o}},n.valueGet=function(){var e=this;if(!e.__destroyed)return e.__value.value},n.valueSet=function(e){var t=this;if(!t.__destroyed)return t.__value=new r(t.__config.defaults.itemLabelKey,e),t.label=t.__value.key,t.$el.text(t.label),t.__value}},{"./item-value":22,"sc-is":8,"sc-md5":14}],22:[function(e,t){var n=e("sc-is"),i=function(e,t){var i={};return i.key=n.object(t)&&n.string(t[e])?t[e]:"",i.value=t,i};t.exports=i},{"sc-is":8}],23:[function(e,t){var n=e("./helpers"),i=e("fuzzaldrin"),r=e("sc-merge"),a=e("minstache"),s=e("debounce"),o=function(e){var t,i=this;Object.defineProperties(i,{__activeItemIndex:{value:0,writable:!0},__destroyed:{value:!1,writable:!0},__templates:{value:{}},__visible:{value:!1,writable:!0},activeItemIndex:{get:n.activeItemIndexGet.bind(i),set:n.activeItemIndexSet.bind(i)},filter:{value:e}}),t=i.filter.__config,Object.keys(t.templates).forEach(function(e){i.__templates[e]=a(t.templates[e],{config:t,cid:"",key:""})}),i.$el=$(a(i.__templates.listWrapper,{config:r(t,{templates:i.__templates})})),i.$el.width(t.defaults.width),i.$input=i.$el.find("."+t.className+"-input"),i.$header=i.$el.find("."+t.className+"-header"),i.$list=i.$el.find("."+t.className+"-items"),i.$sortToggle=i.$el.find("."+t.className+"-sort-toggle"),i.$input.on("change."+t.name+" keydown."+t.name,n.filterChanged.bind(i)),i.$sortToggle.on("click."+t.name,n.sortToggleClicked.bind(i)),i.filter.on("filterChanged",i.redraw.bind(i)),i.filter.on("itemFocus",n.putFocussedItemInView.bind(i)),i.filter.$el.after(i.$el),i.filter.once(t.name+"-ready",function(){t.defaults.sort&&(i.filter.sort=t.defaults.sort)})};o.prototype.close=function(){var e=this,t=e.filter.__config;if(!e.__destroyed)return e.__visible=!1,e.$el.removeClass(t.className+"-container-visible"),e.filter.emit("close"),$(window).off("keyup."+t.name),e.$el.off("click."+t.name),e.__visible},o.prototype.destroy=function(){var e=this,t=e.filter.__config;e.__destroyed||(e.filter.__destroyed=e.__destroyed=!0,$(window).off("."+t.name),e.$input.off("."+t.name),e.$el.off("."+t.name),e.$sortToggle.off("."+t.name),e.filter.off("filterChanged"),e.filter.off("itemFocus"),e.$el.remove())},o.prototype.getActiveItem=function(){var e=this,t=e.filter.__config;if(!e.__destroyed){var n=e.$list.find("."+t.className+"-item-active"),i=n.data("cid"),r=e.filter.__items[i];return r}},o.prototype.open=function(){var e=this,t=e.filter.__config;if(!e.__destroyed)return e.__visible=!0,e.filter.emit("open"),$(window).on("keyup."+t.name,n.windowKeyUp.bind(e)),e.$el.on("click."+t.name,"."+t.className+"-item",n.itemClick.bind(e)),e.redraw(),e.filter.once("redraw",function(){e.$input.focus().select()}),e.__visible},o.prototype.redraw=s(function(){var e=this,t=e.filter.__config;if(!e.__destroyed){var n,s=e.$input.val()||"",o="";if(t.defaults.fuzzy)n=i.filter(e.filter.items,s,{key:t.defaults.itemLabelKey,maxResults:t.defaults.maxNumItems});else{var l=new RegExp("\\b"+s,"i");n=[],e.filter.items.forEach(function(e,i){i<t.defaults.maxNumItems&&l.test(e[t.defaults.itemLabelKey])&&n.push(e)})}e.filter.__sort&&n.sort(function(t,n){var i="desc"===e.filter.__sort?t.name>n.name:t.name<n.name;return i?1:-1}),e.filter.results=n,e.filter.emit("filtered"),n.forEach(function(e){e.key=e[t.defaults.itemLabelKey],o+=a(t.templates.listItem,r({config:t,cid:e.__cid},e))}),e.$list.empty().html(o),e.activeItemIndex=e.activeItemIndex,e.__visible&&setTimeout(function(){if(!e.__destroyed){var n=0;e.$el.addClass(t.className+"-container-invisible"),e.$list.find(">:lt("+t.defaults.maxNumItemsVisible+")").each(function(e,t){n+=$(t).outerHeight()}),e.$list.height(n),e.$el.addClass(t.className+"-container-visible").removeClass(t.className+"-container-invisible"),e.filter.emit("redraw")}},0)}},10),t.exports=o},{"./helpers":21,debounce:1,fuzzaldrin:4,minstache:6,"sc-merge":16}]},{},[20])(20)});