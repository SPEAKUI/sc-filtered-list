!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scfilteredlist=e()}}(function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],2:[function(e,t){(function(){var n,i;i=e("../vendor/stringscore"),n=function(e,t,n){var r,a,s,o,l,c;for(s=e.length-1;"/"===e[s];)s--;for(c=0,o=s,r=null;s>=0;)"/"===e[s]?(c++,null==r&&(r=e.substring(s+1,o+1))):0===s&&(o<e.length-1?null==r&&(r=e.substring(0,o+1)):null==r&&(r=e)),s--;return r===e?n*=2:r&&(n+=i(r,t)),l=c+1,a=Math.max(1,10-l),n*=.01*a},t.exports=function(e,t,r){var a,s,o,l,c,u,f,d,p,_,m;if(m=null!=r?r:{},s=m.key,o=m.maxResults,t){for(l=-1===t.indexOf("/"),f=[],p=0,_=e.length;_>p;p++)a=e[p],d=null!=s?a[s]:a,d&&(c=i(d,t),l&&(c=n(d,t,c)),c>0&&f.push({candidate:a,score:c}));f.sort(function(e,t){return t.score-e.score}),e=function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)u=f[e],n.push(u.candidate);return n}()}return null!=o&&(e=e.slice(0,o)),e}}).call(this)},{"../vendor/stringscore":4}],3:[function(e,t){(function(){var n;n=e("../vendor/stringscore"),t.exports={filter:e("./filter"),score:function(e,t){return e&&t?n(e,t):0}}}).call(this)},{"../vendor/stringscore":4,"./filter":2}],4:[function(e,t){t.exports=function(e,t){if(e==t)return 1;for(var n,i,r,a,s,o,l,c,u,f=0,d=t.length,p=e.length,_=0;d>_;++_){if(o=t.charAt(_),l=e.indexOf(o.toLowerCase()),c=e.indexOf(o.toUpperCase()),u=Math.min(l,c),s=u>-1?u:Math.max(l,c),-1===s)return 0;a=.1,e[s]===o&&(a+=.1),0===s?a+=.6:" "===e.charAt(s-1)&&(a+=.8),e=e.substring(s+1,p),f+=a}return i=f/d,r=(i*(d/p)+i)/2,n&&1>r+.15&&(r+=.15),r}},{}],5:[function(e,t){var n=e("sc-contains"),i=e("sc-is"),r=function(e,t,a,s){var o,l,c=t.toLowerCase(),u=i.an.array(s)?s:[];switch(!0){case/float|integer/.test(c):c="number"}if(i.a.hasOwnProperty(c)?l=i.a[c](e):"*"===c&&(l=!0),l)o=e;else switch(!0){case"array"===c:try{if(i.a.string(e)&&(o=JSON.parse(e)),i.not.an.array(o))throw""}catch(f){i.not.nullOrUndefined(e)&&(o=[e])}break;case"boolean"===c:try{o=/^(true|1|y|yes)$/i.test(e.toString())?!0:void 0}catch(f){}if(i.not.a.boolean(o))try{o=/^(false|-1|0|n|no)$/i.test(e.toString())?!1:void 0}catch(f){}o=i.a.boolean(o)?o:void 0;break;case"date"===c||"datetime"===c:try{o=new Date(e),o=isNaN(o.getTime())?void 0:o}catch(f){}break;case"string"===c:i.a.string(e)&&(o=e),(i.a.boolean(e)||i.a.number(e))&&(o=e.toString());break;case"number"===c:try{if(i.a.array(e)||i.a.guid(e))throw"wrong number";o=parseFloat(e),(i.not.a.number(o)||isNaN(o))&&(o=void 0)}catch(f){o=void 0}if(void 0!==o)switch(!0){case"integer"===t:o=parseInt(o,10)}break;default:try{o=r(JSON.parse(e),c)}catch(f){}}return u.length>0&&!n(u,o)&&(o=u[0]),i.not.undefined(o)?o:i.not.undefined(a)?a:null};t.exports=r},{"sc-contains":6,"sc-is":10}],6:[function(e,t){var n=function(e,t){var n=!1;return Array.isArray(e)?e.forEach(function(e){n===!1&&t===e&&(n=!0)}):Object(e)===e&&Object.keys(e).forEach(function(i){n===!1&&e[i]===t&&(n=!0)}),n};t.exports=n},{}],7:[function(e,t,n){var i="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";n.generate=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)});return t},n.match=function(e){var t=new RegExp(i,"g"),n=("string"==typeof e?e:"").match(t);return Array.isArray(n)?n:[]},n.isValid=function(e){var t=new RegExp(i);return t.test(e)}},{}],8:[function(e,t){function n(e,t,a){e="object"===i(e)?e:{},t="array"===i(t)?t:[],a="string"===i(a)?a:"";var s=t.length>0?t.shift():"",o=r.call(e,s)||void 0!==e[s],l=o?e[s]:void 0,c=i(l)===a;return t.length>0&&o?n(e[s],t,a):t.length>0||""===a?o:o&&c}var i=e("type-component"),r=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){return t="string"===i(t)?t.split("."):[],n(e,t,r)}},{"type-component":9}],9:[function(e,t){var n=Object.prototype.toString;t.exports=function(e){switch(n.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],10:[function(e,t,n){var i=e("./ises/type"),r={a:{},an:{},not:{a:{},an:{}}},a={arguments:["arguments",i("arguments")],array:["array",i("array")],"boolean":["boolean",i("boolean")],date:["date",i("date")],"function":["function","func","fn",i("function")],"null":["null",i("null")],number:["number","integer","int",i("number")],object:["object",i("object")],regexp:["regexp",i("regexp")],string:["string",i("string")],undefined:["undefined",i("undefined")],empty:["empty",e("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",e("./ises/nullorundefined")],guid:["guid",e("./ises/guid")]};Object.keys(a).forEach(function(e){var t=a[e].slice(0,a[e].length-1),n=a[e][a[e].length-1];t.forEach(function(e){r[e]=r.a[e]=r.an[e]=n,r.not[e]=r.not.a[e]=r.not.an[e]=function(){return n.apply(this,arguments)?!1:!0}})}),n=t.exports=r,n.type=i},{"./ises/empty":11,"./ises/guid":12,"./ises/nullorundefined":13,"./ises/type":14}],11:[function(e,t){var n=e("../type");t.exports=function(e){var t=!1;return"null"===n(e)||"undefined"===n(e)?t=!0:"object"===n(e)?t=0===Object.keys(e).length:"boolean"===n(e)?t=e===!1:"number"===n(e)?t=0===e||-1===e:("array"===n(e)||"string"===n(e))&&(t=0===e.length),t}},{"../type":15}],12:[function(e,t){var n=e("sc-guid");t.exports=function(e){return n.isValid(e)}},{"sc-guid":7}],13:[function(e,t){t.exports=function(e){return null===e||void 0===e||void 0===e}},{}],14:[function(e,t){var n=e("../type");t.exports=function(e){return function(t){return n(t)===e}}},{"../type":15}],15:[function(e,t){var n=Object.prototype.toString;t.exports=function(e){switch(n.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],16:[function(e,t,n){function i(e){return JSON.stringify(e)}function r(e){return a(i(e))}var a=e("md5-component");n=t.exports=r,n.stringify=i,n.md5=a},{"md5-component":17}],17:[function(e,t){function n(e){function t(e,t,n){return e&t|~e&n}function n(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function r(e,t,n){return t^(e|~n)}function a(e){return[255&e,e>>>8&255,e>>>16&255,e>>>24&255]}function s(e,t,n,i,r,a,s,o){e[0]+=o(t[0],n[0],i[0])+y[r]+s,e[0]=e[0]<<a|e[0]>>>32-a,e[0]+=t[0]}var o,l,c,u,f,d,p,_,m,h,v,g,b,y,x;for(o=e.length,e.push(128),f=56-e.length&63,l=0;f>l;l++)e.push(0);for(a(8*o).forEach(function(t){e.push(t)}),[0,0,0,0].forEach(function(t){e.push(t)}),d=[1732584193],p=[4023233417],_=[2562383102],m=[271733878],l=0;l<e.length;l+=64){for(y=[],c=0;64>c;c+=4)u=l+c,y.push(e[u]|e[u+1]<<8|e[u+2]<<16|e[u+3]<<24);h=d[0],v=p[0],g=_[0],b=m[0],s(d,p,_,m,0,7,3614090360,t),s(m,d,p,_,1,12,3905402710,t),s(_,m,d,p,2,17,606105819,t),s(p,_,m,d,3,22,3250441966,t),s(d,p,_,m,4,7,4118548399,t),s(m,d,p,_,5,12,1200080426,t),s(_,m,d,p,6,17,2821735955,t),s(p,_,m,d,7,22,4249261313,t),s(d,p,_,m,8,7,1770035416,t),s(m,d,p,_,9,12,2336552879,t),s(_,m,d,p,10,17,4294925233,t),s(p,_,m,d,11,22,2304563134,t),s(d,p,_,m,12,7,1804603682,t),s(m,d,p,_,13,12,4254626195,t),s(_,m,d,p,14,17,2792965006,t),s(p,_,m,d,15,22,1236535329,t),s(d,p,_,m,1,5,4129170786,n),s(m,d,p,_,6,9,3225465664,n),s(_,m,d,p,11,14,643717713,n),s(p,_,m,d,0,20,3921069994,n),s(d,p,_,m,5,5,3593408605,n),s(m,d,p,_,10,9,38016083,n),s(_,m,d,p,15,14,3634488961,n),s(p,_,m,d,4,20,3889429448,n),s(d,p,_,m,9,5,568446438,n),s(m,d,p,_,14,9,3275163606,n),s(_,m,d,p,3,14,4107603335,n),s(p,_,m,d,8,20,1163531501,n),s(d,p,_,m,13,5,2850285829,n),s(m,d,p,_,2,9,4243563512,n),s(_,m,d,p,7,14,1735328473,n),s(p,_,m,d,12,20,2368359562,n),s(d,p,_,m,5,4,4294588738,i),s(m,d,p,_,8,11,2272392833,i),s(_,m,d,p,11,16,1839030562,i),s(p,_,m,d,14,23,4259657740,i),s(d,p,_,m,1,4,2763975236,i),s(m,d,p,_,4,11,1272893353,i),s(_,m,d,p,7,16,4139469664,i),s(p,_,m,d,10,23,3200236656,i),s(d,p,_,m,13,4,681279174,i),s(m,d,p,_,0,11,3936430074,i),s(_,m,d,p,3,16,3572445317,i),s(p,_,m,d,6,23,76029189,i),s(d,p,_,m,9,4,3654602809,i),s(m,d,p,_,12,11,3873151461,i),s(_,m,d,p,15,16,530742520,i),s(p,_,m,d,2,23,3299628645,i),s(d,p,_,m,0,6,4096336452,r),s(m,d,p,_,7,10,1126891415,r),s(_,m,d,p,14,15,2878612391,r),s(p,_,m,d,5,21,4237533241,r),s(d,p,_,m,12,6,1700485571,r),s(m,d,p,_,3,10,2399980690,r),s(_,m,d,p,10,15,4293915773,r),s(p,_,m,d,1,21,2240044497,r),s(d,p,_,m,8,6,1873313359,r),s(m,d,p,_,15,10,4264355552,r),s(_,m,d,p,6,15,2734768916,r),s(p,_,m,d,13,21,1309151649,r),s(d,p,_,m,4,6,4149444226,r),s(m,d,p,_,11,10,3174756917,r),s(_,m,d,p,2,15,718787259,r),s(p,_,m,d,9,21,3951481745,r),d[0]+=h,p[0]+=v,_[0]+=g,m[0]+=b}return x=[],a(d[0]).forEach(function(e){x.push(e)}),a(p[0]).forEach(function(e){x.push(e)}),a(_[0]).forEach(function(e){x.push(e)}),a(m[0]).forEach(function(e){x.push(e)}),x}function i(e){var t,i,r,e,a=[];for(t=0;t<e.length;t++)a.push(e.charCodeAt(t));return i=n(a),r="",i.forEach(function(t){for(e=t.toString(16);e.length<2;)e="0"+e;r+=e}),r}t.exports=i},{}],18:[function(e,t){var n=e("type-component"),i=function(){var e=Array.prototype.slice.call(arguments),t="boolean"===n(e[0])?e.shift():!1,r=e,a={};return r.forEach(function(e){"object"===n(e)&&Object.keys(e).forEach(function(r){Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t&&"object"===n(e[r])?i(t,{},a[r],e[r]):e[r])})}),a};t.exports=i},{"type-component":19}],19:[function(e,t){t.exports=e(9)},{}],20:[function(e,t){var n=function(e){var t={},n=Array.isArray(e)?e:[],i=function(e){var i=Array.prototype.slice.call(arguments,1);return t[e]?t[e].apply(n,i):n["__"+e].apply(n,i)};return Object.defineProperties(n,{on:{value:function(e,n){t[e]=n}}}),Object.defineProperty(n,"pop",{value:function(){return i("pop",n[n.length-1])}}),Object.defineProperty(n,"__pop",{value:function(){return Array.prototype.pop.apply(n,arguments)}}),Object.defineProperty(n,"shift",{value:function(){return i("shift",n[0])}}),Object.defineProperty(n,"__shift",{value:function(){return Array.prototype.shift.apply(n,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(e){var t={};t[e]={value:i.bind(null,e)},t["__"+e]={value:function(){return Array.prototype[e].apply(n,arguments)}},Object.defineProperties(n,t)}),n};t.exports=n},{}],21:[function(e,t){t.exports={name:"scfilteredlist",className:"sc-filtered-list",defaults:{maxNumItemsVisible:7,maxNumItems:10,sortControlVisible:!0,itemLabelKey:"name",defaultButtonLabel:"Choose one",defalutListTitle:"Select an item"},templates:{listWrapper:"<div class='<%= config.className %>-container'><%= config.templates.listInput %><%= config.templates.listHeader %><%= config.templates.listItemWrapper %></div>",listInput:"<div class='<%= config.className %>-input-container'><input type='text' class='<%= config.className %>-input'><%= config.templates.listSortToggle %></div>",listHeader:"<header class='<%= config.className %>-header'><%= config.defaults.defalutListTitle %></header>",listItemWrapper:"<ul class='<%= config.className %>-items'></ul>",listItem:"<li class='<%= config.className %>-item' data-cid='<%= cid %>'><%= key %></li>",listSortToggle:"<button type='button' class='<%= config.className %>-sort-toggle'></button>"}}},{}],22:[function(e,t,n){var i=(e("sc-cast"),e("./config.json")),r=e("emitter-component"),a=e("sc-guid"),s=(e("sc-haskey"),e("./helpers")),o=(e("sc-is"),e("./list")),l=e("sg-observable-array"),c=function(e,t){var n,r,c=this,u=a.generate();if(c.$el=$(e),0===c.$el.length)throw new Error("An invalid DOM element was given");n=$.extend({},i.defaults,c.$el.data(i.className+"-options"),t),r=$.extend({},i,{defaults:n}),c.$el.wrap("<span class='"+r.className+"' data-sc-filtered-list-cid='"+u+"'>"),c.$wrapper=c.$el.parent(),Object.defineProperties(c,{__cid:{value:u},__config:{value:r,writable:!0},__destroyed:{value:!1,writable:!0},__fetching:{value:!1,writable:!0},__items:{value:{},writable:!0},__label:{value:null,writable:!0},__lastFetchedValue:{value:"",writable:!0},__original:{value:{},writable:!0},__sort:{value:"",writable:!0},__value:{value:null,writable:!0},activeItem:{get:s.activeItemGet.bind(c),set:s.activeItemSet.bind(c)},items:{value:l([]),writable:!0},label:{get:s.labelGet.bind(c),set:s.labelSet.bind(c)},list:{writable:!0},listVisible:{get:s.listVisibleGet.bind(c),set:s.listVisibleSet.bind(c)},results:{value:[],writable:!0},sort:{get:s.sortGet.bind(c),set:s.sortSet.bind(c)},value:{get:s.valueGet.bind(c),set:s.valueSet.bind(c)}}),c.list=new o(c),c.__original.buttonText=c.$el.text();var f={};f[c.__config.defaults.itemLabelKey]=c.__config.defaults.defaultButtonLabel,c.value=f,c.$el.addClass(c.__config.className+"-button").data(c.__config.name,c).trigger(c.__config.name+"-ready"),c.__config.defaults.sortControlVisible!==!0&&c.$wrapper.addClass(c.__config.className+"-sort-hidden"),["push","shift"].forEach(function(e){c.items.on(e,s["item"+e].bind(c))}),$(window).on("click."+c.__config.name,s.bodyClick.bind(c)),c.fetch()};c.prototype.destroy=function(){var e=this;e.__destroyed||(e.__destroyed=!0,e.list.destroy(),$(window).off("."+e.__config.name),e.$el.text(e.__original.buttonText).unwrap().data(e.__config.name,null).removeClass(e.__config.className+"-button"),e.emit("destroy"))},c.prototype.fetch=function(){var e=this;e.__destroyed||(e.throttledFetch||(e.throttledFetch=_.throttle(function(){var t=e.list.$input.val();e.__lastFetchedValue=t,e.emit("fetch",e.__lastFetchedValue)},10)),e.throttledFetch())},r(c.prototype),n=t.exports=c,n.defaults=i.defaults,$(function(){$("button[data-"+i.className+"]").each(function(e,t){new c(t)})})},{"./config.json":21,"./helpers":23,"./list":25,"emitter-component":1,"sc-cast":5,"sc-guid":7,"sc-haskey":8,"sc-is":10,"sg-observable-array":20}],23:[function(e,t,n){var i=e("sc-cast"),r=e("sc-haskey"),a=e("./item-value"),s=["","desc","asc"],o=e("sc-md5");n.activeItemGet=function(){var e=this;if(!e.__destroyed)return e.list.getActiveItem()},n.activeItemSet=function(e){var t=this;t.__destroyed||(t.value=e,t.emit("change",e))},n.activeItemIndexGet=function(){var e=this;if(!e.filter.__destroyed)return e.__activeItemIndex},n.activeItemIndexSet=function(e){var t=this;if(!t.filter.__destroyed){var n=i(e,"number",0),r=t.filter.__config.className+"-item-active",a=t.$list.children(),s=$(a[0]),o=t.$list.find("."+r),l=$(a[n]),c=1===l.length?l:1===o.length?o:s;o.removeClass(r),c.addClass(r),t.__activeItemIndex=a.index(c),t.__visible&&t.filter.emit("itemFocus")}},n.bodyClick=function(e){var t=this;if(!t.__destroyed){var n="."+t.__config.className+"-button",i="."+t.__config.className+"-container",a=$(r(e,"target")?e.target:null),s=a.closest("[data-"+t.__config.className+"-cid="+t.__cid+"]"),o=s.length>0&&(a.is(n)||a.closest(n).length)?!0:!1,l=s.length>0&&(a.is(i)||a.closest(i).length)?!0:!1;o&&!t.listVisible?t.listVisible=!0:t.listVisible&&!l&&(t.listVisible=!1)}},n.filterChanged=function(e){var t=this;if(!t.filter.__destroyed){var n=r(e,"keyCode","number")?e.keyCode:-1,i=t.$input.val();switch(n){case 27:t.close();break;case 13:t.close(),t.filter.activeItem=t.getActiveItem();break;case 38:t.activeItemIndex--;break;case 40:t.activeItemIndex++;break;default:n>=0&&(t.filter.emit("filterChanged",i),t.filter.fetch())}}},n.windowKeyUp=function(e){var t=this;if(!t.filter.__destroyed){var n=r(e,"keyCode","number")?e.keyCode:-1;switch(n){case 27:t.close()}}},n.itemClick=function(e){var t=this;if(!t.filter.__destroyed){var n=$(e.currentTarget);t.activeItemIndex=n.parent().children().index(n),t.filter.activeItem=t.getActiveItem(),t.close()}},n.itempush=function(e){var t=this;if(!t.__destroyed){var n=o(e);t.__items[n]||(Object.defineProperty(e,"__cid",{value:n}),t.__items[n]=e,t.items.__push(e),t.list.redraw())}},n.itemshift=function(e){var t=this;if(!t.__destroyed){var n=o(e);delete t.__items[n],t.items.__shift()}},n.labelGet=function(){var e=this;if(!e.__destroyed)return e.__label},n.labelSet=function(e){var t=this;if(!t.__destroyed)return t.__label=i(e,"string",t.__config.defaults.defaultButtonLabel),t.$el.text(t.__label),t.__label},n.listVisibleGet=function(){var e=this;if(!e.__destroyed)return e.list.__visible},n.listVisibleSet=function(e){var t=this;if(!t.__destroyed){var n=i(e,"boolean",!1);return n?t.list.open():t.list.close()}},n.putFocussedItemInView=function(){var e=this;e.filter.__destroyed||setTimeout(function(){var t=e.$list.height(),n=e.$list.find("."+e.filter.__config.className+"-item-active");if(0!==n.length){var i=n.outerHeight(),r=n.position().top,a=r+i;(0>r||a>t)&&n[0].scrollIntoView(0>r)}},10)},n.sortGet=function(){var e=this;if(!e.__destroyed)return e.__sort},n.sortSet=function(e){var t=this;if(!t.__destroyed){var n=t.__config.className+"-sort-",r=s.join(" "+n).trim();return t.__sort=i(e,"string",null,s),t.list.redraw(),t.$wrapper.removeClass(r).addClass(t.__sort?n+t.__sort:""),t.emit("sort"),t.__sort}},n.sortToggleClicked=function(){var e=this;if(!e.filter.__destroyed){var t=e.filter,n=t.sort,i=_.indexOf(s,n),r=i+1,a=void 0===s[r]?s[0]:s[r];t.sort=a}},n.valueGet=function(){var e=this;if(!e.__destroyed)return e.__value.value},n.valueSet=function(e){var t=this;if(!t.__destroyed)return t.__value=new a(t.__config.defaults.itemLabelKey,e),t.label=t.__value.key,t.$el.text(t.label),t.__value}},{"./item-value":24,"sc-cast":5,"sc-haskey":8,"sc-md5":16}],24:[function(e,t){var n=e("sc-haskey"),i=function(e,t){var i={};return i.key=n(t,e,"string")?t[e]:"",i.value=t,i};t.exports=i},{"sc-haskey":8}],25:[function(e,t){var n=(e("sc-cast"),e("./helpers")),i=e("sc-merge"),r=e("fuzzaldrin"),a=function(e){var t,r=this;Object.defineProperties(r,{__activeItemIndex:{value:0,writable:!0},__destroyed:{value:!1,writable:!0},__templates:{value:{}},__visible:{value:!1,writable:!0},activeItemIndex:{get:n.activeItemIndexGet.bind(r),set:n.activeItemIndexSet.bind(r)},filter:{value:e}}),t=r.filter.__config,Object.keys(t.templates).forEach(function(e){r.__templates[e]=_.template(t.templates[e],{config:t,cid:"",key:""})}),r.$el=$(_.template(r.__templates.listWrapper,{config:i(t,{templates:r.__templates})})),r.$input=r.$el.find("."+t.className+"-input"),r.$header=r.$el.find("."+t.className+"-header"),r.$list=r.$el.find("."+t.className+"-items"),r.$sortToggle=r.$el.find("."+t.className+"-sort-toggle"),r.$input.on("change."+t.name+" keydown."+t.name,n.filterChanged.bind(r)),r.$sortToggle.on("click."+t.name,n.sortToggleClicked.bind(r)),r.filter.on("filterChanged",r.redraw.bind(r)),r.filter.on("itemFocus",n.putFocussedItemInView.bind(r)),r.filter.$el.after(r.$el)};a.prototype.close=function(){var e=this,t=e.filter.__config;if(!e.__destroyed)return e.__visible=!1,e.$el.removeClass(t.className+"-container-visible"),e.filter.emit("close"),$(window).off("keyup."+t.name),e.$el.off("click."+t.name),e.__visible},a.prototype.destroy=function(){var e=this,t=e.filter.__config;e.__destroyed||(e.filter.__destroyed=e.__destroyed=!0,$(window).off("."+t.name),e.$input.off("."+t.name),e.$el.off("."+t.name),e.$sortToggle.off("."+t.name),e.filter.off("filterChanged"),e.filter.off("itemFocus"),e.$el.remove())},a.prototype.getActiveItem=function(){var e=this,t=e.filter.__config;if(!e.__destroyed){var n=e.$list.find("."+t.className+"-item-active"),i=n.data("cid"),r=e.filter.__items[i];return r}},a.prototype.open=function(){var e=this,t=e.filter.__config;if(!e.__destroyed)return e.__visible=!0,e.filter.emit("open"),$(window).on("keyup."+t.name,n.windowKeyUp.bind(e)),e.$el.on("click."+t.name,"."+t.className+"-item",n.itemClick.bind(e)),e.redraw(),e.filter.once("redraw",function(){e.$input.focus().select()}),e.__visible},a.prototype.redraw=function(){var e=this,t=e.filter.__config;if(!e.__destroyed)return e.redrawTimeout?(clearTimeout(e.redrawTimeout),e.redrawTimeout=null):void(e.redrawTimeout=setTimeout(function(){if(e.redrawTimeout=null,!e.__destroyed){var n=e.$input.val(),a="",s=r.filter(e.filter.items,n||"",{key:t.defaults.itemLabelKey,maxResults:e.filter.__config.defaults.maxNumItems});e.filter.__sort&&s.sort(function(t,n){var i="desc"===e.filter.__sort?t.name>n.name:t.name<n.name;return i?1:-1}),e.filter.results=s,e.filter.emit("filtered"),s.forEach(function(e){e.key=e[t.defaults.itemLabelKey],a+=_.template(t.templates.listItem,i({config:t,cid:e.__cid},e))}),e.$list.empty().html(a),e.activeItemIndex=e.activeItemIndex,e.__visible&&setTimeout(function(){if(!e.__destroyed){var n=0;e.$el.addClass(t.className+"-container-invisible"),e.$list.find(">:lt("+e.filter.__config.defaults.maxNumItemsVisible+")").each(function(e,t){n+=$(t).outerHeight()}),e.$list.height(n),e.$el.addClass(t.className+"-container-visible").removeClass(t.className+"-container-invisible"),e.filter.emit("redraw")}},0)}},0))},t.exports=a},{"./helpers":23,fuzzaldrin:3,"sc-cast":5,"sc-merge":18}]},{},[22])(22)});